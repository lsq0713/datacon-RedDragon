# 测试记录

1. 第一次测试 - 11.14 - 48

   ``` python
    # 第一次测试(11.14)
    # IP相同，用户数超过50，且属地不在北京/河北
    ip_dup_rid = unique_dup_filter(data, 'IP_ADDRESS', '患者ID', 50)
    ip_dup_rows = data[data['ID'].isin(ip_dup_rid)]
    ip_dup_rows = ip_dup_rows.sort_values(by='患者ID', ascending=True)
    area_limit_rows = ip_dup_rows[(ip_dup_rows['省份'] != '北京') & (ip_dup_rows['省份'] != '河北')]
    select1 = area_limit_rows['ID'].tolist()
    # 用户相同，在超过6个科室挂号
    select2 = unique_dup_filter(data, '患者ID', '就诊科室名称', 6)
    select = select1 + select2
    select = list(set(select))
    select.sort()
    write_list(select)
   ```

2. 第二次测试 - 11.14 - 52

   ``` py
   # 第二次测试(11.14)
   # IP相同，用户数超过50，且属地不在北京/河北
   ip_dup_rows = unique_dup_filter(data, 'IP_ADDRESS', '患者ID', 50, get_row=True)
   area_limit_rows = ip_dup_rows[(ip_dup_rows['省份'] != '北京') & (ip_dup_rows['省份'] != '河北')]
   select1 = area_limit_rows['ID'].tolist()
   # 用户相同，在超过6个科室挂号
   select2 = unique_dup_filter(data, '患者ID', '就诊科室名称', 6)
   # 在5:00:00-5:00:01之间挂号
   select3 = daily_filter(data, '5:00:00', '5:00:01')['ID'].tolist()
   # 在16:00:00-16:00:01之间挂号(挂号第二天/下一周当天)
   select4 = hurry_sixteen(data)
   # 低频地区(少于10次操作)
   select5 = duplicate_detect(data, '省份', 10, False)['ID'].tolist()
   # 同一用户使用超过3个APPID操作
   select6 = unique_dup_filter(data, '患者ID', 'APPID', 3)
   select = select1 + select2 + select3 + select4 + select5 + select6
   select = list(set(select))
   select.sort()
   write_list(select)
   ```

3. 第三次测试 - 11.15 - 35

   ``` py
   # 第三次测试(11.15)
   IP_USER = 50
   USER_DORM = 7
   AREA_COUNT = 20
   USER_APPID = 3
   DROP_LIMIT = 7
   # IP相同，用户数超过IP_USER，且属地不在北京/河北
   ip_dup_rows = unique_dup_filter(data, 'IP_ADDRESS', '患者ID', IP_USER, get_row=True)
   area_limit_rows = ip_dup_rows[(ip_dup_rows['省份'] != '北京') & (ip_dup_rows['省份'] != '河北')]
   select1 = area_limit_rows['ID'].tolist()
   # 用户相同，在超过USER_DORM个科室挂号
   select2 = unique_dup_filter(data, '患者ID', '就诊科室名称', USER_DORM)
   # 在5:00:00-5:00:01之间挂号
   select3 = daily_filter(data, '5:00:00', '5:00:01')['ID'].tolist()
   # 在16:00:00-16:00:01之间挂号(挂号第二天/下一周当天)
   select4 = hurry_sixteen(data)
   # 低频地区(少于AREA_COUNT次操作)
   select5 = duplicate_detect(data, '省份', AREA_COUNT, False)['ID'].tolist()
   # 同一用户使用超过USER_APPID个APPID操作
   select6 = unique_dup_filter(data, '患者ID', 'APPID', USER_APPID)
   # 同一用户超过DROP_LIMIT次退号
   select7 = frequent_drop(data, DROP_LIMIT)['ID'].tolist()

   selects = [select1, select2, select3, select4, select5, select6, select7]
   weights = [0.7, 0.5, 0.8, 0.3, 0.8, 0.6, 0.7]
   # 总得分超过LIMIT,且在前N个
   LIMIT = 0.5
   N = 6500
   res = weighted_selection(selects, weights, N, limit=LIMIT)
   res = [pair[0] for pair in res]
   res.sort()
   write_list(res)
   ```

4. 第四次测试 - 11.15

   ``` py
   # 第四次测试(11.15)
   IP_USER = 50
   USER_DORM = 6
   AREA_COUNT = 40
   USER_APPID = 3
   DROP_LIMIT = 8
   # IP相同，用户数超过IP_USER，且属地不在北京/河北
   ip_dup_rows = unique_dup_filter(data, 'IP_ADDRESS', '患者ID', IP_USER, get_row=True)
   area_limit_rows = ip_dup_rows[(ip_dup_rows['省份'] != '北京') & (ip_dup_rows['省份'] != '河北')]
   select1 = area_limit_rows['ID'].tolist()
   # 用户相同，在超过USER_DORM个科室挂号
   select2 = unique_dup_filter(data, '患者ID', '就诊科室名称', USER_DORM)
   # 在5:00:00-5:00:01之间挂号
   select3 = daily_filter(data, '5:00:00', '5:00:01')['ID'].tolist()
   # 在16:00:00-16:00:01之间挂号(挂号第二天/下一周当天)
   select4 = hurry_sixteen(data)
   # 低频地区(少于AREA_COUNT次操作)
   area_limit = duplicate_detect(data, '省份', AREA_COUNT, False)
   select5 = area_limit['ID'].tolist()
   # 同一用户使用超过USER_APPID个APPID操作
   select6 = unique_dup_filter(data, '患者ID', 'APPID', USER_APPID)
   # 同一用户超过DROP_LIMIT次退号
   select7 = frequent_drop(data, DROP_LIMIT)['ID'].tolist()
   select = select1 + select2 + select3 + select4 + select5 + select6 + select7
   select = list(set(select))
   select.sort()
   write_list(select)
   ```
